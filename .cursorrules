# Education Benchmark Mapper — Cursor Rules

## Project Overview

This project maps AI/LLM benchmarks to a K-12 education framework. It has two parts:
- **Python pipeline** (root) — scrapes, classifies, and reports on benchmarks
- **SvelteKit website** (`website/`) — static frontend for browsing results

## Python (Root)

- **Package manager**: `uv` (not pip). Run scripts with `uv run main.py`.
- **Python version**: 3.11+
- **Dependencies**: defined in `pyproject.toml`
- **Style**: type hints on all function signatures; use `list[X]` not `List[X]`
- **Data class**: `BenchmarkEntry` in `scraper.py` is the core data structure
- **Config**: all framework categories, tool types, and search queries live in `config.py`
- **API keys**: loaded from `.env` via `python-dotenv` — never hardcode keys
- **LLM calls**: use Anthropic SDK (`anthropic` package). Default model: `claude-haiku-4-5-20251001`
- **Console output**: use `rich` for progress bars and formatted output in `mapper.py`
- **Reports**: `report.py` generates Markdown, CSV, and JSON — keep all three in sync

## Website (SvelteKit)

- **Framework**: SvelteKit with Svelte 5 (runes: `$state`, `$derived`, `$effect`, `$props`)
- **Styling**: Tailwind CSS v4 (via `@tailwindcss/vite` plugin, no `tailwind.config`)
- **TypeScript**: strict mode, all components and modules fully typed
- **Data flow**: benchmarks loaded from `/static/benchmarks.json` via `loadBenchmarks()` in `$lib/data/benchmarks.ts`
- **Search**: MiniSearch full-text engine in `$lib/data/search.ts`
  - Index built once on first `loadBenchmarks()` call
  - `searchBenchmarks(query)` returns `Map<slug, score>` for ranked results
  - `filterBenchmarks()` in `benchmarks.ts` is the single source of truth for all filtering (search + year + dismissed)
  - Field boosting: name 3×, tags 2×, TLDR 1.5×, description 1×
  - Fuzzy matching (0.2 tolerance) with prefix search enabled
  - Automatic fallback to higher fuzziness (0.4) when strict search returns no results
- **Stores**: Svelte 5 runes-based stores in `$lib/stores/` (not legacy Svelte stores)
- **Components**: in `$lib/components/`, use `$props()` pattern
- **Pages**: `+page.svelte` for UI, `+page.ts` for data loading (no server-side load functions)
- **Design system**:
  - Rounded corners: `rounded-[14px]` for cards, `rounded-full` for pills/badges
  - Colors: `text-black`, `text-muted`, `text-text-secondary`, `bg-surface`, `bg-accent/10`
  - Transitions: `transition-colors` on interactive elements
  - Shadows: `shadow-[0px_4px_6px_0px_rgba(0,0,0,0.1)]` for cards
- **Pagination**: client-side with `PAGE_SIZE = 50` and "Show more" button

## Conventions

- When adding new search/filter capabilities, update `filterBenchmarks()` — it's the single entry point used by all 3 list pages (main, framework, tool-type)
- The `benchmarks.json` static file is generated by `curate.py sync` (which enriches pipeline output with S2 paper details) — don't edit it manually
- S2 enrichment (TLDR, citation count, PDF URL) is done in `curate.py` `generate_benchmarks_json()` by joining with `output/s2_paper_details.json`
- Keep the README.md up to date when adding features
- Prefer editing existing files over creating new ones
- When modifying the Python classification pipeline, keep heuristic (Stage 1) and LLM (Stage 2) in sync
